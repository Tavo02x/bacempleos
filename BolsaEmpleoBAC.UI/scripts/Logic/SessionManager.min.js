String.prototype.replaceAll=function(n,t){var i=this;return i.split(n).join(t)};var Session={Login:function(n,t){$("#popupLoading").modal("show");var i={username:n,password:md5(t)};Ajax.sendAny(ApiService.login,"POST",i,Session.LoginResponse,Session.Error)},Logout:function(){var n,t;localStorage.hasOwnProperty("role")&&localStorage.removeItem("role");localStorage.hasOwnProperty("token")&&localStorage.removeItem("token");sessionStorage.hasOwnProperty("role")&&sessionStorage.removeItem("role");sessionStorage.hasOwnProperty("token")&&(n=Utils.decodeJWT(),sessionStorage.getItem("token"),t={username:n.unique_name,password:""},Ajax.sendAny(ApiService.logout,"POST",t,Session.LogoutResponse,Session.Error))},EndSession:function(){var n,t;sessionStorage.hasOwnProperty("role")&&sessionStorage.removeItem("role");sessionStorage.hasOwnProperty("token")&&(n=Utils.decodeJWT(),sessionStorage.getItem("token"),t={username:n.unique_name,password:""},Ajax.sendAny(ApiService.logout,"POST",t,Session.EndSessionResponse,Session.Error))},LoginResponse:function(n){sessionStorage.setItem("token",n.token);sessionStorage.setItem("role",n.role);var i=Utils.decodeJWT(),r=JSON.parse(sessionStorage.getItem("role")),t=Utils.getUrlParameter("x");Utils.decodeJWT().urlTemp!=undefined&&Utils.decodeJWT().urlTemp!=null&&(t=Utils.decodeJWT().urlTemp);window.location=__env.baseUrl+"Default/Direccionador?username="+i.unique_name+"&urlExterna="+t},LogoutResponse:function(){localStorage.hasOwnProperty("role")&&localStorage.removeItem("role");localStorage.hasOwnProperty("token")&&localStorage.removeItem("token");sessionStorage.hasOwnProperty("role")&&sessionStorage.removeItem("role");sessionStorage.hasOwnProperty("token")&&sessionStorage.removeItem("token");$("#popupLoading").modal("hide")},EndSessionResponse:function(){localStorage.hasOwnProperty("role")&&localStorage.removeItem("role");localStorage.hasOwnProperty("token")&&localStorage.removeItem("token");sessionStorage.hasOwnProperty("role")&&sessionStorage.removeItem("role");sessionStorage.hasOwnProperty("token")&&sessionStorage.removeItem("token");$("#popupLoading").modal("hide");window.location=__env.baseUrl+"Principal/Login"},Error:function(){Utils.MessageBox("Login","Login","Credenciales invalidos","Content/Images/IconoErrorGeneral.png",function(){$("#popupLoading").modal("hide");this.modal("hide")})}};$(document).ready(function(){});