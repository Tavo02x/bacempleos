"use strict";(function(){angular.module("BacApp.controllers.VerPuestosDisponibles",[]).controller("VerPuestosDisponiblesController",function(n,t,i,r){n.model={};n.model.nombre="";n.count=0;var u=function(n,t,r){var u=Utils.getFilterParameters(n);i.doGet(t,u).then(r)},f=function(n,t,r){var u=Utils.getFilterObject(n),f={Objeto:u,Lista:[],Token:"",Id:0};i.doPost(t,u).then(r)};n.AreaLaboralGet=function(){u({},ApiService.AreaLaboralGet,function(t){n.Areas=t.Lista})};n.getPaises=function(){var t=Utils.decodeJWT(),i={id:{value:t.UserId}};u(i,ApiService.GetPais,function(t){n.Paises=t.Lista})};n.getPreparacionAcademica=function(){u({},ApiService.GradoAcademicoGet,function(t){n.PreparacionAcademica=t.Lista})};n.getJornadaLaboral=function(){u({},ApiService.JornadaLaboralGet,function(t){n.JornadaLaboral=t.Lista})};n.CleanFilter=function(){n.AreaLaboralGet();n.getPaises();n.getJornadaLaboral();n.getPreparacionAcademica();n.LoadGrid()};n.LoadGrid=function(){var i=Utils.GetWidthWindow(),r=Utils.decodeJWT(),u=eval(r.PaisesFiltro),t={IdPais:{value:u,cond:OConfig.condEquals,type:OTypes.default,comp:"||"}};i<=764?Utils.getGrid(ApiService.PuestosDisponiblesGrid,t,"tablaPostulantes",["",""],"MobileColumn",n.redirect,5,"totalGrid","IdPuesto","IdPuesto","desc"):Utils.getGrid(ApiService.PuestosDisponiblesGrid,t,"tablaPostulantes",["Título del puesto","País","Fecha de cierre","Ver"],"Puesto,Pais,FechaCierreOferta",n.redirect,5,"totalGrid","IdPuesto","IdPuesto","desc")};n.redirect=function(n){sessionStorage.setItem("volver",r.baseUrl+"Puesto/Puestosdisponibles");window.location=r.baseUrl+"Puesto/VerPuesto?IdPuesto="+(n==undefined?0:n.IdPuesto)};n.redirect1=function(){window.location=r.baseUrl+"Puesto/MantenimientoPuesto"};n.Filter=function(){var u=Utils.decodeJWT(),f=Utils.getValCheck("areas"),t=Utils.getValCheck("pais"),e=Utils.getValCheck("academica"),o=Utils.getValCheck("jornada"),i,r;t.length==0&&(t=eval(u.PaisesFiltro));i={Puesto:{value:n.model.nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdPais:{value:t,cond:OConfig.condEquals,type:OTypes.default,comp:"||"},IdArea:{value:f,cond:OConfig.condEquals,type:OTypes.default,comp:"||"},IdJornada:{value:o,cond:OConfig.condEquals,type:OTypes.default,comp:"||"},IdNivelAcademico:{value:e,cond:OConfig.condEquals,type:OTypes.default,comp:"||"}};r=Utils.GetWidthWindow();r<=764?Utils.getGrid(ApiService.PuestosDisponiblesGrid,i,"tablaPostulantes",["",""],"MobileColumn",n.redirect,5,"totalGrid","IdPuesto","IdPuesto","desc"):Utils.getGrid(ApiService.PuestosDisponiblesGrid,i,"tablaPostulantes",["Título del puesto","País","Fecha de cierre","Ver"],"Puesto,Pais,FechaCierreOferta",n.redirect,5,"totalGrid","IdPuesto","IdPuesto","desc")};n.FilterWord=function(){Utils.clearCheckboxes();var t=n.model.nombre,i=Utils.GetWidthWindow();i<=764?Utils.getGrid(ApiService.PuestosDisponiblesGrid,{},"tablaPostulantes",["",""],"MobileColumn",n.redirect,5,"totalGrid","IdPuesto","IdPuesto","desc"):Utils.getGrid(ApiService.PuestosDisponiblesGrid,{},"tablaPostulantes",["Título del puesto","País","Fecha de cierre","Ver"],"Puesto,Pais,FechaCierreOferta",n.redirect,5,"totalGrid","IdPuesto","IdPuesto","desc",["Puesto"],t)};n.VerificarSession=function(){var t,i,r;Utils.getUrlParameter("token")!=""&&(sessionStorage.hasOwnProperty("token")&&sessionStorage.removeItem("token"),t=Utils.getUrlParameter("token"),sessionStorage.setItem("token",t));sessionStorage.hasOwnProperty("token")||(t=Utils.getUrlParameter("token"),sessionStorage.setItem("token",t),console.log(t));sessionStorage.hasOwnProperty("role")?n.SeguridadJS():(i=Utils.decodeJWT(),r={userid:{value:i.UserId}},u(r,ApiService.GetMenu,function(t){sessionStorage.setItem("role",t.Objeto);n.SeguridadJS()}))};n.SeguridadJS=function(){var n=JSON.parse(sessionStorage.getItem("role")),t;n!=null&&(t=n.where(function(n){return n.TipoAccionId==3&&n.ReferenciasAux=="VerPuestosDisponiblesController"}),$.each(t,function(n,t){var i=eval("$scope."+t.ReferenciaJS);i!=undefined&&i!=null&&i!=""&&eval("$scope."+t.ReferenciaJS+"= function () { }")}))}})})();