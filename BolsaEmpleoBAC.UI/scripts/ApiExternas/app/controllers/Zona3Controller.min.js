"use strict";(function(){angular.module("BacApp.controllers.Zona3",[]).controller("Zona3Controller",function(n,t,i){n.Zona3={};n.Zona3.IdZona3=0;n.Zona3.Descripcion="";n.Zona3.IdPais="";n.Zona3.IdZona1="";n.Zona3.IdZona2="";n.Zona3.Borrado=!1;n.Zona3.FechaCreacion=Date.now;var r=function(n,t,r){var u=Utils.getFilterParameters(n);i.doGet(t,u).then(r)},u=function(n,t,r){var u={Objeto:n,Lista:[],Token:"",Id:n.IdZona3};i.doPost(t,u).then(r)};n.loadGridZona3=function(){Utils.getGrid(ApiService.Zona3Grid,{},"tablezona3",["Nombre","Zona 2","Ver"],"NombreZona3,NombreZona2",n.Cargar3,5,"totalGrid","IdZona3,IdPais,IdZona1,IdZona2,Borrado")};n.getPaises=function(){var t=Utils.decodeJWT(),i={id:{value:t.UserId}};r({},ApiService.GetPaises,function(t){n.Paises=t.Lista})};n.getZona=function(){var t={id:{value:n.Zona3.IdPais}};r(t,ApiService.Zona1Get,function(t){n.Zona1=t.Lista})};n.Zona2Get=function(){var t={id:{value:n.Zona3.IdZona1}};r(t,ApiService.Zona2Get,function(t){n.Zona2=t.Lista})};n.Zona3Get=function(){};n.Guardar=function(){$("#popupArea").modal("hide");u(n.Zona3,ApiService.Zona3Save,function(t){t.Resultado?Utils.MessageBox("Mantenimiento Zonas","Zona 3",t.Mensaje,"Content/Images/IconoConfimacion1.png",function(){n.loadGridZona3();n.LimpiarPaso3();this.modal("hide");$("#popupLoading").modal("hide")}):Utils.MessageBox("Mantenimiento Zonas","Zona 3",t.Mensaje,"Content/Images/IconoErrorGeneral.png",function(){n.loadGridZona3();n.LimpiarPaso3();this.modal("hide");$("#popupLoading").modal("hide")})})};n.LimpiarPaso3=function(){n.$apply(function(){n.model.pais="";n.Zona3.IdZona3=0;n.Zona3.Descripcion="";n.Zona3.IdZona1="";n.Zona3.IdPais="";n.Zona3.IdZona2="";n.Zona3.Borrado=!1})};n.Cargar3=function(t){$("#popupArea").modal("show");n.$apply(function(){n.Zona3.IdZona3=t.IdZona3;n.Zona3.Descripcion=t.NombreZona3;n.Zona3.Borrado=t.Borrado;n.Zona3.FechaCreacion=Date.now;n.Zona3.IdPais=t.IdPais;n.getZona();n.Zona3.IdZona1=t.IdZona1;n.Zona2Get();n.Zona3.IdZona2=t.IdZona2})};n.Cancelar=function(){$("#popupArea").modal("hide");n.LimpiarPaso3()};n.SeguridadJS=function(){var n=JSON.parse(sessionStorage.getItem("role")),t;n!=null&&(t=n.where(function(n){return n.TipoAccionId==3&&n.ReferenciasAux=="Zona3Controller"}),$.each(t,function(n,t){var i=eval("$scope."+t.ReferenciaJS);i!=undefined&&i!=null&&i!=""&&eval("$scope."+t.ReferenciaJS+"= function () { }")}))}})})();