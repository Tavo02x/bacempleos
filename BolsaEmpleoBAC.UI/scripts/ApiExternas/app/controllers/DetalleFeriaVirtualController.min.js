"use strict";(function(){angular.module("BacApp.controllers.DetalleFeriaVirtual",[]).controller("DetalleFeriaVirtualController",function(n,t,i,r){n.IdFeriaEmpleo=Utils.getUrlParameter("IdFeriaEmpleo");n.IdUsuario=Utils.decodeJWT().UserId;n.IdEntrevistador=0;n.NombreFeria="";n.Paises="";n.FechaInicial="";n.FechaFinal="";n.AgendadasCant=0;n.SolicitadasCant=0;n.RealizadasCant=0;n.Nombre="";n.StepOne=!0;n.StepTwo=!1;n.Entrevistadores={};n.step1Class="tapSelect";n.step2Class="taps";n.Return=function(){window.location=r.baseUrl+"FeriaVirtual/VerFeriaVirtual"};n.ChangeStepOne=function(){n.StepOne=!0;n.StepTwo=!1;n.step1Class="tapSelect";n.step2Class="taps"};n.ChangeStepTwo=function(){n.StepOne=!1;n.StepTwo=!0;n.step1Class="taps";n.step2Class="tapSelect"};n.GetDetalleFeriaVirtual=function(){var t={IdFeriaEmpleo:{value:n.IdFeriaEmpleo}};t.IdUsuario=n.IdEntrevistador!=0&&n.IdEntrevistador!=""&&n.IdEntrevistador!=null?{value:n.IdEntrevistador}:{value:n.IdUsuario};u(t,ApiService.GetFeriaDetalles,function(t){var i=t.Objeto;n.NombreFeria=i.NombreFeria;n.Paises=i.Paises.join();n.FechaInicial=i.FechaInicioFormat;n.FechaFinal=i.FechaFinFormat;n.AgendadasCant=i.Agendadas;n.SolicitadasCant=i.Solicitadas;n.RealizadasCant=i.Realizadas})};n.GetEntrevistadores=function(){var t={IdFeriaEmpleo:{value:n.IdFeriaEmpleo}};u(t,ApiService.GetEntrevistadoresFeria,function(t){n.Entrevistadores=t.Objeto})};var u=function(n,t,r){var u=Utils.getFilterParameters(n);i.doGet(t,u).then(r)},f=function(n,t,r){var u={Objeto:n,Lista:[],Token:"",Id:0};i.doPost(t,u).then(r)};n.AceptarEntrevista=function(){};n.LoadGridPuestos=function(){var t={IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default}},i=Utils.GetWidthWindow();i<=764?Utils.getGrid(ApiService.PuestosFeriaVirtualGrid,t,"divPuestos",["",""],"MobileColumn",n.Redirect,5,"totalGrid","IdFeriaEmpleo,IdPuesto","FechaCreacion","desc"):Utils.getGrid(ApiService.PuestosFeriaVirtualGrid,t,"divPuestos",["Título del puesto","País","Postulantes","Ver"],"Puesto,Pais,Cantidad",n.Redirect,5,"totalGrid","IdFeriaEmpleo,IdPuesto","FechaCreacion","desc")};n.Redirect=function(t){sessionStorage.setItem("volver",r.baseUrl+"FeriaVirtual/DetalleFeriaVirtual?IdFeriaEmpleo="+n.IdFeriaEmpleo);window.location=r.baseUrl+"Puesto/PostulantesPuestoFeria?IdPuesto="+t.IdPuesto+"&IdFeriaEmpleo="+n.IdFeriaEmpleo};n.LoadGridPuestosPostulante=function(){var t={IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default}},i=Utils.GetWidthWindow();i<=764?Utils.getGrid(ApiService.PuestosFeriaVirtualGrid,t,"divPuestos",["",""],"MobileColumn",n.RedirectPostulante,5,"totalGrid","IdFeriaEmpleo,IdPuesto","FechaCreacion","desc"):Utils.getGrid(ApiService.PuestosFeriaVirtualGrid,t,"divPuestos",["Título del puesto","País","Ver"],"Puesto,Pais",n.RedirectPostulante,5,"totalGrid","IdFeriaEmpleo,IdPuesto","FechaCreacion","desc")};n.RedirectPostulante=function(t){sessionStorage.setItem("volver",r.baseUrl+"FeriaVirtual/DetalleFeriaVirtualPostulante?IdFeriaEmpleo="+n.IdFeriaEmpleo);window.location=r.baseUrl+"Puesto/VerPuestoFeria?IdPuesto="+t.IdPuesto+"&IdFeriaEmpleo="+n.IdFeriaEmpleo};n.LoadGridAgendadas=function(){var t={},i;t=n.IdEntrevistador!=0&&n.IdEntrevistador!=""&&n.IdEntrevistador!=null?{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdEntrevistador,cond:OConfig.condEquals,type:OTypes.default}}:{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdUsuario,cond:OConfig.condEquals,type:OTypes.default}};i=Utils.GetWidthWindow();i<=764?Utils.getGrid1(ApiService.EntrevistasAgendadasGrid,t,"divAgendadas",["","",""],"ColumnMobile1,ColumnMobile2",n.Agendadas,5,"totalGrid","IdEntrevista,IdPostulante,Email,NombreCompleto,JoinUrl","IdEntrevista","desc"):Utils.getGrid1(ApiService.EntrevistasAgendadasGrid,t,"divAgendadas",["Nombre","País","Entrevista","Ver"],"NombreCompleto,Pais,EntrevistaFechaTipo",n.Agendadas,5,"totalGrid","IdEntrevista,IdPostulante,Email,JoinUrl","IdEntrevista","desc")};n.LoadGridSolicitadas=function(){var t={},i;t=n.IdEntrevistador!=0&&n.IdEntrevistador!=""&&n.IdEntrevistador!=null?{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdEntrevistador,cond:OConfig.condEquals,type:OTypes.default}}:{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdUsuario,cond:OConfig.condEquals,type:OTypes.default}};i=Utils.GetWidthWindow();i<=764?Utils.getGrid2(ApiService.EntrevistasSolicitadasGrid,t,"divSolicitadas",["","",""],"ColumnMobile1,ColumnMobile2",n.Solicitadas,5,"totalGrid","IdEntrevista,IdPostulante,Email,NombreCompleto","IdEntrevista","desc"):Utils.getGrid2(ApiService.EntrevistasSolicitadasGrid,t,"divSolicitadas",["Nombre","País","Entrevista","Ver"],"NombreCompleto,Pais,EntrevistaFechaTipo",n.Solicitadas,5,"totalGrid","IdEntrevista,IdPostulante,Email","IdEntrevista","desc")};n.LoadGridRechazadas=function(){var t={},i;t=n.IdEntrevistador!=0&&n.IdEntrevistador!=""&&n.IdEntrevistador!=null?{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdEntrevistador,cond:OConfig.condEquals,type:OTypes.default}}:{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdUsuario,cond:OConfig.condEquals,type:OTypes.default}};i=Utils.GetWidthWindow();i<=764?Utils.getGrid3(ApiService.EntrevistasRechazadasGrid,t,"divRechazadas",["","",""],"ColumnMobile1,ColumnMobile2",n.Rechazadas,5,"totalGrid","IdEntrevista,IdPostulante,Email,NombreCompleto","IdEntrevista","desc"):Utils.getGrid3(ApiService.EntrevistasRechazadasGrid,t,"divRechazadas",["Nombre","País","Entrevista","Ver"],"NombreCompleto,Pais,EntrevistaFechaTipo",n.Rechazadas,5,"totalGrid","IdEntrevista,IdPostulante,Email","IdEntrevista","desc")};n.LoadGridRealizadas=function(){var t={},i;t=n.IdEntrevistador!=0&&n.IdEntrevistador!=""&&n.IdEntrevistador!=null?{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdEntrevistador,cond:OConfig.condEquals,type:OTypes.default}}:{NombreCompleto:{value:n.Nombre,cond:OConfig.condLike,type:OTypes.string,comp:"||"},IdFeriaEmpleo:{value:n.IdFeriaEmpleo,cond:OConfig.condEquals,type:OTypes.default},IdUsuario:{value:n.IdUsuario,cond:OConfig.condEquals,type:OTypes.default}};i=Utils.GetWidthWindow();i<=764?Utils.getGrid3(ApiService.EntrevistasRealizadasGrid,t,"divRealizadas",["","",""],"ColumnMobile1,ColumnMobile2",n.Rechazadas,5,"totalGrid","IdEntrevista,IdPostulante,Email,NombreCompleto","IdEntrevista","desc"):Utils.getGrid3(ApiService.EntrevistasRealizadasGrid,t,"divRealizadas",["Nombre","País","Entrevista","Ver"],"NombreCompleto,Pais,EntrevistaFechaTipo",n.Rechazadas,5,"totalGrid","IdEntrevista,IdPostulante,Email","IdEntrevista","desc")};n.FilterAll=function(){n.LoadGridAgendadas();n.LoadGridSolicitadas();n.LoadGridRechazadas();n.LoadGridRealizadas()};n.Agendadas=function(t){n.$apply(function(){console.log(t.JoinUrl);window.open(t.JoinUrl,"_blank")})};n.Solicitadas=function(t){n.$apply(function(){window.location=r.baseUrl+"Entrevistas/ReagendarEntrevistasFeria?IdFeriaEmpleo="+n.IdFeriaEmpleo+"&IdEntrevista="+t.IdEntrevista})};n.Rechazadas=function(t){n.$apply(function(){n.IdPuesto=t.IdPuesto;window.location=r.baseUrl+"Postulante/VerPerfil?IdPostulante="+t.Email})};n.Realizadas=function(t){n.$apply(function(){n.IdPuesto=t.IdPuesto;window.location=r.baseUrl+"Postulante/VerPerfil?IdPostulante="+t.Email})};n.AplicarSeguridadHTML=function(){Utils.SeguridadHTML()};n.Volver=function(){window.location=r.baseUrl+"FeriaVirtual/VerFeriaVirtual"};n.SeguridadJS=function(){var n=JSON.parse(sessionStorage.getItem("role")),t;n!=null&&(t=n.where(function(n){return n.TipoAccionId==3&&n.ReferenciasAux=="DetalleFeriaVirtualController"}),$.each(t,function(n,t){var i=eval("$scope."+t.ReferenciaJS);i!=undefined&&i!=null&&i!=""&&eval("$scope."+t.ReferenciaJS+"= function () { }")}))}})})();