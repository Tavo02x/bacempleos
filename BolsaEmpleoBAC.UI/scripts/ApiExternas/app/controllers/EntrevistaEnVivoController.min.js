"use strict";(function(){angular.module("BacApp.controllers.EntrevistaEnVivo",[]).controller("EntrevistaEnVivoController",function(n,t,i,r){var f,u;n.model={};n.IdPostulante=Utils.getUrlParameter("IdPostulante");n.Email=Utils.getUrlParameter("User");n.Date=new Date;n.Hour="";n.DateInterview=n.Date+" "+n.Hour;n.AgendarEntrevista=function(){var i=Utils.decodeJWT(),t;n.DateInterview=n.Date;t={Topic:"Entrevista en vivo",Start_time:new Date(n.DateInterview),Hour:n.Hour,IdPostulante:n.IdPostulante,IdSolicitante:i.UserId,IdFeriaEmpleo:null,IdPuesto:null,Auto_recording:"cloud",Duration:15};u(t,ApiService.AgendarEntrevista,function(t){t.Resultado?Utils.MessageBox("Entrevista","Entrevista",'Entrevista agendada exitosamente<br/> <a href="'+t.JoinUrl+'" target="_blank">Url de ingreso<\/a><br/><a href="'+t.StartUrl+'" target="_blank">Url de ingreso inmediato<\/a>',"Content/Images/IconoConfirmacionFeriaVirtual.png",function(){this.modal("hide");window.location=r.baseUrl+"Postulante/VerPerfil?IdPostulante="+n.Email}):Utils.MessageBox("Entrevista","Entrevista",t.Mensaje,"Content/Images/IconoErrorGeneral.png",function(){$("#popupLoading").modal("hide");this.modal("hide")})})};f=function(n,t,r){var u=Utils.getFilterParameters(n);i.doGet(t,u).then(r)};n.Volver=function(){window.location=r.baseUrl+"Postulante/VerPerfil?IdPostulante="+n.Email};u=function(n,t,r){var u={Objeto:n,Lista:[],Token:"",Id:0};i.doPost(t,u).then(r)};n.SeguridadJS=function(){var n=JSON.parse(sessionStorage.getItem("role")),t;n!=null&&(t=n.where(function(n){return n.TipoAccionId==3&&n.ReferenciasAux=="EntrevistaEnVivoController"}),$.each(t,function(n,t){var i=eval("$scope."+t.ReferenciaJS);i!=undefined&&i!=null&&i!=""&&eval("$scope."+t.ReferenciaJS+"= function () { }")}))};n.dateOptions={showWeeks:!1,formatYear:"yy",minDate:new Date,startingDay:0,placement:"bottom"};n.openDatepicker=function(){n.datepicker.opened=!0};n.format="dd/MM/yyyy";n.datepicker={opened:!1}})})();