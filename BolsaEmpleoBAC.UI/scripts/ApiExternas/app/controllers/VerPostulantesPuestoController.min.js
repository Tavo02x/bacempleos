"use strict";(function(){angular.module("BacApp.controllers.VerPostulantesPuesto",[]).controller("VerPostulantesPuestoController",function(n,t,i,r){n.model={};n.model.IdPuesto=Utils.getUrlParameter("IdPuesto");n.model.nombre="";n.model.Titulo=Utils.getUrlParameter("Puesto");n.model.IdFeria=Utils.getUrlParameter("IdFeriaEmpleo");n.count=0;n.Identificacion="";n.Nacionalidad="";n.PaisResidencia="";n.Genero="";n.IdEstadoCivil="";n.Vehiculo="";n.IdDiscapacidad="";n.Favorito="";n.GradoAcademico="";n.EstudiaActualmente="";n.EstadoAplicante="";n.IdPuestosPublicacionTrack="";var u=function(n,t,r){var u=Utils.getFilterParameters(n);i.doGet(t,u).then(r)},f=function(n,t,r){var u=Utils.getFilterObject(n),f={Objeto:u,Lista:[],Token:"",Id:0};i.doPost(t,u).then(r)};n.AreaLaboralGet=function(){u({},ApiService.AreaLaboralGet,function(t){n.Areas=t.Lista})};n.getPaises=function(){var t=Utils.decodeJWT(),i={id:{value:t.UserId}};u(i,ApiService.GetPais,function(t){n.Paises=t.Lista})};n.LoadGrid=function(){var i=[],t,r;i.push(n.model.IdPuesto);t={IdPuesto:{value:i,cond:OConfig.condEquals,type:OTypes.default,comp:"||"}};r=Utils.GetWidthWindow();r<=764?Utils.getGrid(ApiService.PostulanteXPuestoGrid,t,"tablaPostulantes",["","",""],"ColumnMobile1,ColumnMobile2",n.redirect,5,"totalGrid","IdPostulante,Email,IdPuesto","FechaCreacion","desc"):Utils.getGrid(ApiService.PostulanteXPuestoGrid,t,"tablaPostulantes",["Nombre","País","Edad","Puesto aplicados","Ver"],"NombreCompleto,Pais,Edad,Cantidad",n.redirect,5,"totalGrid","IdPostulante,Email","FechaCreacion","desc")};n.LoadGridFeria=function(){var t,i;[].push(n.model.IdPuesto);t={IdPuesto:{value:n.model.IdPuesto,cond:OConfig.condEquals,type:OTypes.default,comp:"||"},IdFeriaEmpleo:{value:n.model.IdFeria,cond:OConfig.condEquals,type:OTypes.default,comp:"||"}};i=Utils.GetWidthWindow();i<=764?Utils.getGrid(ApiService.PostulanteXPuestoFeriaGrid,t,"tablaPostulantes",["","",""],"ColumnMobile1,ColumnMobile2",n.redirect,5,"totalGrid","IdPostulante,IdEntrevista,Email,IdPuesto","IdEntrevista","desc"):Utils.getGrid(ApiService.PostulanteXPuestoFeriaGrid,t,"tablaPostulantes",["Nombre","País","Entrevista","Ver"],"NombreCompleto,Pais,EntrevistaFechaTipo",n.redirect,5,"totalGrid","IdPostulante,IdEntrevista,Email,IdPuesto","IdEntrevista","desc")};n.redirect=function(t){var i=r.baseUrl+"Postulante/VerPerfil?IdPostulante="+(t==undefined?0:t.Email),f={IdPostulante:{value:t.IdPostulante},IdPuesto:{value:t.IdPuesto==undefined?n.model.IdPuesto:t.IdPuesto}};u(f,ApiService.CambiarEstadoPerfilLeido,function(){window.location=i})};n.Filter=function(){var i=Utils.getValCheck("areas"),r=Utils.getValCheck("pais"),u=Utils.getValCheck("pretension"),t,f;n.model.nombre="";t={IdPuesto:{value:n.model.IdPuesto,cond:OConfig.condEquals,type:OTypes.default}};n.Identificacion!=""&&n.Identificacion!=undefined&&n.Identificacion!=null&&(t.Identificacion={value:n.Identificacion,cond:OConfig.condEquals,type:OTypes.string});n.Nacionalidad!=""&&n.Nacionalidad!=undefined&&n.Nacionalidad!=null&&(t.Nacionalidad={value:n.Nacionalidad,cond:OConfig.condEquals,type:OTypes.string});n.PaisRecidencia!=""&&n.PaisRecidencia!=undefined&&n.PaisRecidencia!=null&&(t.PaisRecidencia={value:n.PaisRecidencia,cond:OConfig.condEquals,type:OTypes.default});n.Genero!=""&&n.Genero!=undefined&&n.Genero!=null&&(t.Genero={value:n.Genero,cond:OConfig.condEquals,type:OTypes.default});n.IdEstadoCivil!=""&&n.IdEstadoCivil!=undefined&&n.IdEstadoCivil!=null&&(t.IdEstadoCivil={value:n.IdEstadoCivil,cond:OConfig.condEquals,type:OTypes.default});n.Vehiculo!=""&&n.Vehiculo!=undefined&&n.Vehiculo!=null&&(t.Vehiculo={value:n.Vehiculo,cond:OConfig.condEquals,type:OTypes.default});n.EstudiaActualmente!=""&&n.EstudiaActualmente!=undefined&&n.EstudiaActualmente!=null&&(t.EstudiaActualidad={value:n.EstudiaActualmente,cond:OConfig.condEquals,type:OTypes.default});n.EstadoAplicante!=""&&n.EstadoAplicante!=undefined&&n.EstadoAplicante!=null&&(t.IdEstadoPerfil={value:n.EstadoAplicante,cond:OConfig.condEquals,type:OTypes.default});n.GradoAcademico!=""&&n.GradoAcademico!=undefined&&n.GradoAcademico!=null&&(t.GradoAcademico={value:n.GradoAcademico,cond:OConfig.condEquals,type:OTypes.default});n.IdPuestosPublicacionTrack!=""&&n.IdPuestosPublicacionTrack!=undefined&&n.IdPuestosPublicacionTrack!=null&&(t.IdPuestosPublicacionTrack={value:n.IdPuestosPublicacionTrack,cond:OConfig.condLike,type:OTypes.string,comp:"||"});r.length>0&&(t.IdPais={value:r.join(),cond:OConfig.condLike,type:OTypes.string,comp:"||"});i.length>0&&(t.IdArea={value:i.join(),cond:OConfig.condLike,type:OTypes.string,comp:"||"});n.IdDiscapacidad!=""&&n.IdDiscapacidad!=undefined&&n.IdDiscapacidad!=null&&(t.IdDiscapacidad={value:n.IdDiscapacidad,cond:OConfig.condEquals,type:OTypes.default});u.length>0&&(t.IdPretensionSalarial={value:u,cond:OConfig.condEquals,type:OTypes.default,comp:"||"});n.Favorito!=""&&n.Favorito!=undefined&&n.Favorito!=null&&(t.Favorito={value:n.Favorito,cond:OConfig.condEquals,type:OTypes.default});n.model.nombre!=""&&n.model.nombre!=undefined&&n.model.nombre!=null&&(t.NombreCompleto={value:n.model.nombre,cond:OConfig.condLike,type:OTypes.default});f=Utils.GetWidthWindow();f<=764?Utils.getGrid(ApiService.PostulanteXPuestoGrid,t,"tablaPostulantes",["","",""],"ColumnMobile1,ColumnMobile2",n.redirect,5,"totalGrid","IdPostulante,Email,IdPuesto","FechaCreacion","desc"):Utils.getGrid(ApiService.PostulanteXPuestoGrid,t,"tablaPostulantes",["Nombre","País","Edad","Puesto aplicados","Ver"],"NombreCompleto,Pais,Edad,Cantidad",n.redirect,5,"totalGrid","IdPostulante,Email","FechaCreacion","desc")};n.FilterFeria=function(){var r=Utils.getValCheck("areas"),u=Utils.getValCheck("pais"),f=Utils.getValCheck("pretension"),t={IdPuesto:{value:n.model.IdPuesto,cond:OConfig.condEquals,type:OTypes.default}},i;n.model.nombre!=""&&n.model.nombre!=undefined&&n.model.nombre!=null&&(t.NombreCompleto={value:n.model.nombre,cond:OConfig.condLike,type:OTypes.default});i=Utils.GetWidthWindow();i<=764?Utils.getGrid(ApiService.PostulanteXPuestoFeriaGrid,t,"tablaPostulantes",["","",""],"ColumnMobile1,ColumnMobile2",n.redirect,5,"totalGrid","IdPostulante,IdEntrevista,Email,IdPuesto","IdEntrevista","desc"):Utils.getGrid(ApiService.PostulanteXPuestoFeriaGrid,t,"tablaPostulantes",["Nombre","País","Entrevista","Ver"],"NombreCompleto,Pais,EntrevistaFechaTipo",n.redirect,5,"totalGrid","IdPostulante,IdEntrevista,Email,IdPuesto","IdEntrevista","desc")};n.Clear=function(){n.Identificacion="";n.Nacionalidad="";n.PaisRecidencia="";n.Genero="";n.IdEstadoCivil="";n.Vehiculo="";n.IdDiscapacidad="";n.Favorito="";n.EstudiaActualmente="";n.EstadoAplicante="";n.IdPuestosPublicacionTrack="";n.GradoAcademico="";n.AreaLaboralGet();n.getPaises();n.DiscapacidadGet();n.PretensionSalarialGet();n.GetTracking();n.LoadGrid()};n.Volver=function(){window.location=r.baseUrl+"FeriaVirtual/DetalleFeriaVirtual?IdFeriaEmpleo="+n.model.IdFeria};n.DiscapacidadGet=function(){u({},ApiService.DiscapacidadGet,function(t){n.Discapacidades=t.Lista})};n.GetTracking=function(){var t={IdPuesto:{value:n.model.IdPuesto}};u(t,ApiService.PuestosGetTracking,function(t){n.Tracking=t.Lista})};n.PretensionSalarialGet=function(){u({},ApiService.PretensionSalarialGet,function(t){n.Pretensiones=t.Lista})};n.SeguridadJS=function(){var n=JSON.parse(sessionStorage.getItem("role")),t;n!=null&&(t=n.where(function(n){return n.TipoAccionId==3&&n.ReferenciasAux=="VerPostulantesPuestoController"}),$.each(t,function(n,t){var i=eval("$scope."+t.ReferenciaJS);i!=undefined&&i!=null&&i!=""&&eval("$scope."+t.ReferenciaJS+"= function () { }")}))}})})();