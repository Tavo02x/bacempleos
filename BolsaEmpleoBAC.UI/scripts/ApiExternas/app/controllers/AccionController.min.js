"use strict";(function(){angular.module("BacApp.controllers.Accion",[]).controller("AccionController",function(n,t,i){n.model={};n.model.AccionId=0;n.model.Nombre="";n.model.Descripcion="";n.model.ReferenciaHTML="";n.model.ReferenciaJS="";n.model.ReferenciasWebAPI="";n.model.ReferenciasAux="";n.model.TipoAccionId="";n.model.ParentId="";n.model.Icono="";n.model.URL="";n.model.Borrado=!1;var u=function(n,t,r){var u=Utils.getFilterParameters(n);i.doGet(t,u).then(r)},r=function(t,r,u){var f={Objeto:t,Lista:[],Token:"",Id:n.model.AccionId};i.doPost(r,f).then(u)};n.LoadGrid=function(){Utils.getGrid(ApiService.AccionGrid,{},"table",["Nombre","Descripción","Tipo","Padre","Ver"],"Nombre,Descripcion,NombreTipoAccion,NombrePadre",n.Cargar,5,"totalGrid","AccionId,ReferenciaHTML,ReferenciaJS,ReferenciasWebAPI,ReferenciasAux,TipoAccionId,ParentId,Icono,URL,Borrado")};n.GetTipo=function(){i.doGet(ApiService.AccionGetTipo,"").then(function(t){n.tipos=t.Lista})};n.GetAccion=function(){i.doGet(ApiService.AccionGet,"").then(function(t){n.acciones=t.Lista})};n.Guardar=function(){$("#popupArea").modal("hide");r(n.model,ApiService.AccionSave,function(t){t.Resultado?Utils.MessageBox("Mantenimiento Acciones","Acción",t.Mensaje,"Content/Images/IconoConfimacion1.png",function(){n.LoadGrid();n.Limpiar();$("#popupLoading").modal("hide");this.modal("hide")}):Utils.MessageBox("Mantenimiento Acciones","Acción",t.Mensaje,"Content/Images/IconoErrorGeneral.png",function(){n.LoadGrid();$("#popupLoading").modal("hide");this.modal("hide")})})};n.Limpiar=function(){n.$apply(function(){n.model.AccionId=0;n.model.Nombre="";n.model.Descripcion="";n.model.ReferenciaHTML="";n.model.ReferenciaJS="";n.model.ReferenciasWebAPI="";n.model.ReferenciasAux="";n.model.TipoAccionId="";n.model.ParentId="";n.model.Icono="";n.model.URL="";n.model.Borrado=!1})};n.Cancelar=function(){$("#popupArea").modal("hide");n.Limpiar()};n.Cargar=function(t){$("#popupArea").modal("show");n.$apply(function(){n.model.AccionId=t.AccionId;n.model.Nombre=t.Nombre;n.model.Descripcion=t.Descripcion;n.model.ReferenciaHTML=t.ReferenciaHTML;n.model.ReferenciaJS=t.ReferenciaJS;n.model.ReferenciasWebAPI=t.ReferenciasWebAPI;n.model.ReferenciasAux=t.ReferenciasAux;n.model.TipoAccionId=t.TipoAccionId;n.model.ParentId=t.ParentId;n.model.Icono=t.Icono;n.model.URL=t.URL;n.model.Borrado=t.Borrado})};n.SeguridadJS=function(){var n=JSON.parse(sessionStorage.getItem("role")),t;n!=null&&(t=n.where(function(n){return n.TipoAccionId===3&&n.ReferenciasAux==="AccionController"}),$.each(t,function(n,t){var i=eval("$scope."+t.ReferenciaJS);i!==undefined&&i!==null&&i!==""&&eval("$scope."+t.ReferenciaJS+"= function () { }")}))}})})();